# Javascript 入門

JavaScript について、何が特別なのか、それを使って達成できること、他のどのテクノロジーがそれと上手くやるのか見てみましょう。

## JavaScript とは？

*JavaScript* は当初 *"Webページを活かすため"* に作られました。

この言語のプログラムは *スクリプト* と呼ばれます。それらはHTMLの中に書かれ、ページが読み込まれると自動的に実行されます。

スクリプトはプレーンテキストとして提供され、実行されます。 それらは特別な準備や、実行するためのコンパイルを必要としません。

この側面において、JavaScript は [Java](http://en.wikipedia.org/wiki/Java) とはとても異なります。

```smart header="なぜ <u>Java</u>Script?"

JavaScript が作られたとき, 当初は別の名前を持っていました:"LiveScript"。しかし Java 言語はその時非常に人気がありました。そのため、Java の "弟" として新しい言語を位置づけることが助けになると判断されました。
しかし、その進化により、JavaScriptは完全に独立した言語になり、[ECMAScript](http://en.wikipedia.org/wiki/ECMAScript)と呼ばれる自身の仕様を持ちました。今は、 Java とは全く関係はありません。
```

現在、JavaScript はブラウザだけでなく、サーバ上でも実行することができます。また、実際には [JavaScript エンジン](https://en.wikipedia.org/wiki/JavaScript_engine) と呼ばれるプログラムが存在するデバイスであれば実行することができます。

ブラウザにはエンジンが組み込まれており、それは "JavaScript 仮想マシン" と呼ばれる場合があります。

異なるエンジンは異なる "コードネーム" を持っています。例えば:

- [V8](https://en.wikipedia.org/wiki/V8_(JavaScript_engine)) -- in Chrome and Opera.
- [SpiderMonkey](https://en.wikipedia.org/wiki/SpiderMonkey) -- in Firefox.
- ...IEの異なるバージョン用として "Trident" や "Chakra", Microsoft Edge 用の "ChakraCore", Safari 用の "Nitro" や "SquirrelFish" 等のように他のコードネームもあります。

上記の用語は、インターネット上の開発者の記事で使用されているため、覚えておくと良いです。 我々もそれらを使うでしょう。たとえば、 "ある機能XがV8でサポートされている" 場合、おそらくChromeとOperaで動作します。

```smart header="エンジンはどのように動く?"

エンジンは複雑です。 しかし、基本は簡単です。

1. エンジン (ブラウザの場合は組み込まれています) はスクリプトを読み("パース")ます。
2. そして、スクリプトをマシン語に変換("コンパイル")します。
3. そして、マシンコードは非常に早く動く

エンジンは、プロセスのすべてのステージで最適化を適用します。
実行時にコンパイルされたスクリプトも見ており、その中を流れるデータを分析し、その知識に基づいてマシンコードに最適化を適用します。 最終的に、スクリプトはかなり高速です。
```

## ブラウザ内のJavaScriptは何をすることができますか？

モダンなJavaScriptは "安全な" プログラミング言語です。
それは、メモリやCPUのような低レベルのアクセスは提供しません。なぜなら、それは最初にそれを必要としないブラウザ用に作成されたからです。

この能力は、JavaScriptを実行する環境に大きく依存します。 例えば、[Node.JS](https://wikipedia.org/wiki/Node.js) は、JavaScriptが任意のファイルを読み書きできるようにする関数をサポートしています。

ブラウザ内のJavaScriptは、Webページ操作、ユーザやWebサーバとのやり取り、に関するすべてのことができます。

たとえば、ブラウザ内のJavaScriptは以下のことが可能です:

- 新たなHTMLをページに追加したり、存在するコンテンツの変更やスタイルの変更をします
- ユーザーアクションに反応し、マウスのクリック、ポインタの動き、キーの押下の実行をします
- リモートサーバへネットワーク越しのリクエストを送り、ファイルのダウンロードやアップロードをします( [AJAX](https://en.wikipedia.org/wiki/Ajax_(programming)) や [COMET](https://en.wikipedia.org/wiki/Comet_(programming)) と呼ばれるテクノロジー)。
- クッキーを取得、設定し、訪問者に質問してメッセージを表示します。
- クライアント側のデータを覚えます("local storage")。


## ブラウザ内のJavaScriptで出来ないことは何ですか？

ブラウザでのJavaScriptの機能はユーザの安全のために制限されています。
その目的は、悪意のあるWebページがプライベートな情報へアクセスしたり、ユーザデータを害するのを防ぐことです。

このような制限の例は次のようなものです:

- Webページ上のJavaScriptは、ハードディスク上の任意のファイルの読み書きや、それらのコピー、プログラムの実行をすることができません。それはOSのシステム機能に直接アクセスすることはできません。

    現代のブラウザは、それがファイルを扱うことを許可しますが、アクセスは制限されており、ブラウザウィンドウへのファイルの "ドロップ" や、`<input>` タグを経由したファイルの選択と言ったユーザの特定の操作の場合にのみ提供しています。

    カメラ/マイクや他のデバイスとやり取りする方法はありますが、それらはユーザの明示的な許可が求められます。そのため、JavaScriptが有効なページはWebカメラをこそこそと有効にしたり、周囲を観察したり、[NSA](https://en.wikipedia.org/wiki/National_Security_Agency) に情報を送信することはできません。
- 異なるタブやウィンドウは一般的にお互いについて知りません。ときどき、例えばあるウィンドウがJavaScriptを利用して別のウィンドウを開くケースはあります。しかし、この場合においても、あるページからのJavaScriptは、別のサイト（異なるドメイン、プロトコル、ポート）からのものである場合は、アクセスすることは出来ません。

    これは "Same Origin Policy" と呼ばれています。回避するためには、 *両方のページ* にデータ交換を行うための特別なJavaScriptコードを含める必要があります。

    その制限は、改めてユーザの安全のためです。ユーザが開いた `http://anysite.com` というサイトのページは、URL `http://gmail.com` の別のブラウザのタブにアクセスし、そこから情報を盗むことはできません。
- JavaScriptはネット越しに、現在のページがきたサーバと簡単にコミュニケーションできます。しかし、他のサイト/ドメインからデータを受信するための機能は犠牲になっています。可能だけれども、リモート側からの明示的な同意(HTTPヘッダに表現)が必要になります。もう一度繰り返しますが、それは安全上の制限です。

![](limitations.png)

もしもJavaScriptがブラウザの外で使われる場合は、このような制限は存在しません。たとえば、サーバ上です。また、現代のブラウザは拡張パーミッションを取得するプラグイン/拡張のインストールを許可しています。

## なにがJavaScriptをユニークなものにしている？

JavaScriptには少なくとも *3つ* の素晴らしいことがあります:

```比較
+ HTML/CSSとの完全な統合
+ シンプルなことはシンプルに
+ すべてのメジャーブラウザでサポートされており、デフォルトで有効
```

これらの3つの事柄はJavaScriptのみで存在し、他のブラウザ技術は存在しません。

それがJavaScriptをユニークなものにしています。だからこそ、これはブラウザインタフェースを作成するための最も普及したツールです。

新しい技術を学ぶことを計画している間、その全体像を確認することは有益です。それでは、新しい言語やブラウザ機能を含む最新のトレンドに移りましょう。


## JavaScriptを "超える" 言語

JavaScriptの構文は、全員のニーズにマッチはしていません。異なる人々は異なる機能を求めます。

プロジェクトや要件はすべての人で異なるため、それは予想されます。

そのため、最近では新しい言語が数多く登場しており、それは、それらがブラウザで実行する前にJavaScriptに *トランスパイル* (変換)されます。


最新のツールは非常に早くトランスパイルし透過的です。実際、開発者が別の言語でコードを作成し、それを自動変換することができます。

このような言語の例:

- [CoffeeScript](http://coffeescript.org/) はJavaScripのための "シンタックスシュガー"です。より短い構文を導入し、より簡潔でクリアなコードを書くことができます。たいてい、Ruby 開発者は好きです。
- [TypeScript](http://www.typescriptlang.org/) は "厳密なデータ型指定" の追加に集中しています。それは複雑なシステムの開発とサポートを簡素化するためです。これは Microsoftにより開発されています。
- [Dart](https://www.dartlang.org/) はブラウザ以外の環境（モバイルアプリのような）で動作する独自のエンジンを持ったスタンドアローンな言語です。最初はGoogleによってJavaScriptの代わりとして提供されましたが、今のところ、ブラウザは上述のようにそれらをJavaScriptにトランスパイルする必要があります。

他にもあります。もちろんたとえ私達が、それらの言語の1つを使うとしても、我々がしていることを本当に理解するためにJavaScriptを知るべきです。

## サマリ

- JavaScriptは最初ブラウザ用の言語として作られました。しかし今は同様に他の多くの環境で利用されています。
- 現時点では、JavaScriptはHTML/CSSと完全に統合し、最も広く採用されたブラウザ言語として、独立した地位にいます。
- JavaScriptに "トランスパイル" し、特定の機能を提供する多くの言語があります。 JavaScriptをマスターした後で、少なくとも簡単に見てみることをお勧めします。
